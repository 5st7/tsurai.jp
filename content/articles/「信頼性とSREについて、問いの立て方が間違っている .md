# 「信頼性とSREについて、問いの立て方が間違っている」← 見て思った事

「SREを始めよう」の作者の方が [You Are Asking the Wrong Questions (about Reliability and SRE)](https://www.infoq.com/presentations/sre-questions/\))というタイトルでSREについて発表されていたので要約と見て思った事をメモ

# 要約

### 信頼性への理解

信頼性は単なる「稼働しているか（Availability）」だけではありません。顧客視点から見たさまざまな側面を考慮する必要があります。

- **可用性 (Availability)**
- **遅延 (Latency)**
  - 「遅いはダウンと同じ」であり、応答速度の重要性。
- **スループット (Throughput)**
  - パイプラインシステムにおける処理能力。
- **カバレッジ (Coverage)**
  - バッチシステムにおけるデータ処理の網羅性。
- **正確性 (Correctness)**
  - 結果の正確さ。
- **忠実度? (Fidelity)**
  - 完全な体験を提供しているか（例：Netflixがレコメンドエンジン停止時でも、ページを部分的に提供する**デグレード状態**）。
- **耐久性 (Durability)**
  - 書き込んだデータが失われないこと。
- **顧客視点で考えるべき**
  - 信頼性は、**コンポーネントの視点**ではなく、**常に顧客の視点**から測定されなければならない。考えるメトリクスは顧客に近ければ近いほど良い。
  - 代理指標を使ってはいけないと言う話ではない。が、代理指標を使う場合その指標が代理指標であるという**組織的な指標であるという認識を持つべき**
    - 持てない場合は使わない方がいい

## SREが持つべきマインドセット

- **システムはどのように**働くのか。
- **システムはどのように**失敗するのか。
  - 失敗した時の分析のマインドセットは↓
    - 失敗した時の分析の際にはなぜなぜ分析は有害情報を過度にそぎ落とし、根本的なプロセスや文脈の問題（休暇、ドキュメントの間違いなど）を見落とすため、考えない。
    - **ヒューマンエラー**
      - ヒューマンエラーにする場合、調査がそこで止まり、プロセス、ツール、文脈の欠陥の学習機会を失います
    - **事実に事なる推論**
      - 「オペレーターは〜すべきだった」と、実際には起こらなかった理想的な行動を基に判断する。
    - **規範的言語**
      - 「〜すべきだった (ought to, should have)」など、結果を知っている立場から当時の意思決定者を裁く。
    - **機械論的推論**
      - 「機械は完璧だったのに、人間が変更して失敗した」と考え、人間の適応能力を否定し、責任を負わせる。
    - **成功の根本原因**
      - 失敗だけでなく、システムが**成功した要因**（何が稼働し続けたか、問題が悪化しなかった理由）にも注目し、それを強化すべき。
  - ※ナンシー・レベソンの研究を調べるのがいいらしい。今後勉強したい

### 信頼性向上の組織内での売り込み方

SRE/信頼性向上を組織に受け入れさせる際に避けるべきアプローチ。以下の方法は避けた方がいい。

- **保険外交員のように売る**
  - 「ダウンタイムのコストを節約できる」と、まだ起きていない事象を定量化して売るのは難しい。
- **痛みを伴わないと約束する**
  - SREの取り組み（アプリのデータ出力化など）は、既存のやり方を変える必要があり、**痛み（変更）は伴う**。
- **「税金」として扱う**
  - 信頼性を、嫌々支払うべきコストセンターや、予算・時間への課税として位置づけない。
- **SLI/SLOの専門用語で話す**
  - ビジネスリーダーには、**顧客獲得**や**顧客維持**、**売上**といった**彼らの言葉**で話す必要がある。

### トイルの自動化

- **トイルの落とし穴**
  - サーバーがロックアップするたびに自動で再起動するシステムは、一時的に**トイルを排除**しますが、**根本原因**（メモリリークなど）を解決していません。これは「対症療法」であり、トイルの解消とは言えません。
- **トイルの複雑性へのトレードオフ**
  - 自動化を導入することで、トイルを**複雑性**（複雑な自動化システム）に変換している可能性があります。
  - [自動化の皮肉]() でも紹介されている通り、自動化には痛みを伴う
    - **①自動化されたシステムが正しく作動しているかをモニターすること**
    - **②そのシステムが正しく作動していないときに事態に対処すること**
      - これらに対応するために、マニュアルであれば気にしないでよかったポイントを自動化する必要があり、余計に複雑化してしまう。
    - 自動化することによって、労力を複雑さと交換することになるということで、今私は非常に複雑な自動化システムを手に入れるが、労力を移動させるか、複雑さに変えるだけです。これが正しいかどうかは分かりませんが、ここに複雑さが加わるということを理解する必要がある。
- **「誰のトイルか」:** 自動化を考えるとき、それが**顧客**、**自分**、**他のチーム**の誰のトイルを解消しているのかを問うことが重要です。
  - 「自動化」という点にこだわり、自分だけのものとして考えてしまいがち。

---

## 感想

- 信頼性は顧客視点から考えるべきというのは分かる。
  - それはそれとして難しいと思うので向き合っていきたい。
- 売り込み方に関してはSLI/SLOという単語だけで話していたので、信頼性は顧客獲得のために必要で、SLI/SLOみたいなものはきちんとこの指標が顧客獲得のための指標であるという説明をしていくべきだなと感じた。
  - その説明の際に最初はSLI/SLOという単語を使わずにわかりやすいように説明していくべきだと感じた
- 自動化に関して、労力を複雑性に置き換えているだけ、というのは自分の中で言語化はできていなかったが感じていることではあったので、自動化するときはきちんと見極めた上で設計したい。
  - というかその業務に関する理解が浅いのに自動化する場合、だいたい痛い目を見てると思うので業務理解を深めた上で取り組むようにしたい

###

###
