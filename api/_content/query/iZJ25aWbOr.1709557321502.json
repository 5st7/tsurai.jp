{"_path":"/articles/efficient-mysql-performance-2","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Efficient MySQL Performance 読書メモ ~その2~","description":"メモ１からの続き","author":{"name":"5st7","avatarUrl":"https://pbs.twimg.com/profile_images/1042510623962275840/1Iw_Mvud_400x400.jpg","link":"https://twitter.com/5st7"},"date":"2024-03-1","layout":"article","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"メモ１からの続き"}]},{"type":"element","tag":"h1","props":{"id":"indexes-and-indexing"},"children":[{"type":"text","value":"Indexes and Indexing"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Indexを有効に使うことでMySQLのパフォーマンスを最も発揮することができる"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"InnoDbは主キーで整理されたB-Treeインデックス\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Clustered Index\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"PK をキーにした B-tree インデックスとして保存されている"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Secondary Index\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"PK 以外のキーを使ったすべてのインデックス"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Leaf に PK を保持している。つまり Secondary Index を使った検索はまず Secondary Index を走査し取得した PK の値で Clustered Index を走査する"}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ある時点では最適なインデックスも、時間経過でそうではなくなることがある\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"クエリが変わる"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"キーが過剰、重複、未使用\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.percona.com/percona-toolkit/pt-duplicate-key-checker.html","rel":["nofollow"]},"children":[{"type":"text","value":"pt-duplicate-key-checker"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"インデックスを Drop する時、8.0 以降は Invisible Indexes で実際に削除せずに検証できる"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Selectivity が極端\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"小さい場合: より適切なキーがある"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"大きい場合: 本来ユニークインデックスであるべきかも"}]}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:Efficient-MySQL-Performance-2.md","_source":"content","_file":"articles/Efficient-MySQL-Performance-2.md","_extension":"md"}